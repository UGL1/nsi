% General text formatting
\RequirePackage{multicol}
\RequirePackage{numprint}
\RequirePackage{enumitem}

\newcommand{\np}{\numprint}
\setlength{\parindent}{0pt}
\renewcommand{\baselinestretch}{1.2}


% define a new list environment with lettered labels
\newlist{enumalph}{enumerate}{1}
\setlist[enumalph]{label=\textbf{\alph*.},leftmargin=1.3em}


% beautify enumerate
\setlist[enumerate]{label=\textbf{\arabic*.},leftmargin=*}


% beautify itemize
\setlist[itemize]{label=--,leftmargin=*}


% enumerate-like \question command with no indentation at all
\newcounter{questionnumber}
\newcommand{\question}{\addtocounter{questionnumber}{1}\textbf{\thequestionnumber.~}}
\newcommand{\resetquestion}{\setcounter{questionnumber}{0}}

% QCM
\newlist{qcm}{enumerate}{1}
\setlist[qcm]{label=\raisebox{-.2em}{\Large$\square$}\hspace*{1em}\textbf{\alph*.},leftmargin=*}



% Boxes: Packages
\RequirePackage[minted,most]{tcolorbox}
\setminted{autogobble=true,breaklines=true,tabsize=4}

% Boxes: modubox (base box class)
\newenvironment{modubox}[2]{
  \renewcommand{\UGLiTabBackground}{#2}
  \begin{tcolorbox}[title={\color{#2}\boxfont #1},
      colback=white, breakable=true,
      boxrule=0pt,
      colframe=white,
      colbacktitle=white,
      attach boxed title to top left={xshift=-3.4mm,yshift=.2mm},
      frame hidden,
      sharp corners,
      enhanced,
      borderline west={5pt}{1pt}{#2!50},
      colback=white]
    }
    {\end{tcolorbox}}


% Boxes: various code environments inheriting from modubox
\newenvironment*{encadrecolore}[2]{\begin{modubox}{#1}{#2}}{
  \end{modubox}}
\newenvironment*{pyc}{\begin{modubox}{Python}{UGLiPurple}}{
  \end{modubox}}
\newenvironment*{pys}{\begin{modubox}{Python}{UGLiPurple}}{
  \end{modubox}}
\newenvironment*{html}{\begin{modubox}{HTML}{UGLiGreen}}{
  \end{modubox}}
\newenvironment*{css}{\begin{modubox}{CSS}{UGLiOrange}}{
  \end{modubox}}
\newenvironment*{js}{\begin{modubox}{Javascript}{UGLiBlue}}{
  \end{modubox}}
\newenvironment*{cpp}{\begin{modubox}{C++}{UGLiOrange}}{
  \end{modubox}}
\newenvironment*{clang}{\begin{modubox}{C}{UGLiOrange}}{
  \end{modubox}}


% Boxes: various text environments inheriting from modubox
\newenvironment*{definition}[1][]{\begin{modubox}{Définition#1}{UGLiGreen}}{\end{modubox}}
\newenvironment*{notation}[1][]{\begin{modubox}{Notation#1}{UGLiBlue}}{\end{modubox}}
\newenvironment*{exemple}[1][]{\begin{modubox}{Exemple#1}{UGLiYellow}}{\end{modubox}}
\newenvironment*{propriete}[1][]{\begin{modubox}{Propriété#1}{UGLiRed}}{\end{modubox}}
\newenvironment*{methode}[1][]{\begin{modubox}{Méthode#1}{UGLiPurple}}{\end{modubox}}
\newenvironment*{remarque}[1][]{\begin{modubox}{Remarque#1}{UGLiGreen}}{\end{modubox}}
\newenvironment*{aretenir}[1][]{\begin{modubox}{À retenir#1}{UGLiGreen}}{\end{modubox}}
\newenvironment*{demonstration}[1][]{\begin{modubox}{Preuve#1}{gray}}{\end{modubox}}

% Boxes: exo
\newcounter{exonumber}
\setcounter{exonumber}{0}
\newenvironment*{exercice}[1][]
{\stepcounter{exonumber}\begin{modubox}{Exercice \theexonumber #1}{UGLiOrange}}
    {\end{modubox}}


% Backwards compatibility with old versions
\newcommand{\pythoninline}[1]{\mintinline{python}{#1}}
%\newcommand{«}{«}
%\newcommand{»}{»}



\newlength{\colOne}
\newlength{\colTwo}
\newlength{\gutter}
\setlength{\gutter}{2em}



%\dleft{absolute left length}{content1}{content2}
\newcommand{\dleft}[3]{
    \setlength{\colOne}{#1}
    \setlength{\colTwo}{\dimexpr\textwidth-\colOne-\gutter\relax}
    \noindent\begin{minipage}{\colOne}
    #2
    \end{minipage}
    \hspace{\dimexpr\gutter-.5em\relax}
    \begin{minipage}{\colTwo}
    #3
    \end{minipage}
}


%\dright{absolute right length}{content1}{content2}
\newcommand{\dright}[3]{
    \setlength{\colTwo}{#1}
    \setlength{\colOne}{\dimexpr\textwidth-\colOne-\gutter\relax}
    \noindent\begin{minipage}{\colOne}
    #2
    \end{minipage}
    \hspace{\dimexpr\gutter-.5em\relax}
    \begin{minipage}{\colTwo}
    #3
    \end{minipage}
}


%\floatpictureright{fraction}{imagefile}{text}
\newcommand{\floatpictureright}[3]{
  \setlength{\colTwo}{\dimexpr#1\textwidth}
  \setlength{\colOne}{\dimexpr\textwidth-\colTwo-\gutter\relax}
  \noindent\begin{minipage}{\colOne}
    #3
  \end{minipage}
  \hspace{\dimexpr\gutter-.5em\relax}
  \begin{minipage}{\colTwo}
    \includegraphics[width=\colTwo]{#2}
  \end{minipage}
}
% alias picright
\newcommand{\picright}[3]{\floatpictureright{#1}{#2}{#3}}


%\floatpictureleft{fraction}{imagefile}{text}
\newcommand{\floatpictureleft}[3]{
  \setlength{\colOne}{\dimexpr#1\textwidth}
  \setlength{\colTwo}{\dimexpr\textwidth-\colOne-\gutter\relax}
  \noindent\begin{minipage}{\colOne}
    \includegraphics[width=\colOne]{#2}
  \end{minipage}
  \hspace{\dimexpr\gutter-.5em\relax}
  \begin{minipage}{\colTwo}
    #3
  \end{minipage}
}
% alias picleft
\newcommand{\picleft}[3]{\floatpictureleft{#1}{#2}{#3}}


%\floatpicturerightcaption{fraction}{imagefile}{caption}{text}
\newcommand{\floatpicturerightcaption}[4]{
  \setlength{\colTwo}{\dimexpr#1\textwidth}
  \setlength{\colOne}{\dimexpr\textwidth-\colTwo-\gutter\relax}
  \noindent\begin{minipage}{\colOne}
    #4
  \end{minipage}
  \hspace{\dimexpr\gutter-.5em\relax}
  \begin{minipage}{\colTwo}
    \centering
    \includegraphics[width=\colTwo]{#2}\\
    \scriptsize #3
  \end{minipage}
}
% alias picrightc
\newcommand{\picrightc}[4]{\floatpicturerightcaption{#1}{#2}{#3}{#4}}


%\floatpictureleftcaption{fraction}{imagefile}{caption}{text}
\newcommand{\floatpictureleftcaption}[4]{
  \setlength{\colOne}{\dimexpr#1\textwidth}
  \setlength{\colTwo}{\dimexpr\textwidth-\colOne-\gutter\relax}
  \noindent\begin{minipage}{\colOne}
    \centering
    \includegraphics[width=\colOne]{#2}\\
    \scriptsize #3
  \end{minipage}
  \hspace{\dimexpr\gutter-.5em\relax}
  \begin{minipage}{\colTwo}
    #4
  \end{minipage}
}
% alias picleftc
\newcommand{\picleftc}[4]{\floatpictureleftcaption{#1}{#2}{#3}{#4}}



%old stuff
\newcommand{\bareme}[1]{{\scriptsize\hfill\color{gray}\ldots~/ #1}}
\usepackage{float}
\usepackage{caption}
\captionsetup{font=scriptsize}

\newcommand{\introduction}[1] {
    \begin{flushright}\small
        \color{UGLiBlue}\textit{« #1 »}
    \end{flushright}
}