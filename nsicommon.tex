% General text formatting
\RequirePackage{multicol}
\RequirePackage{colortbl}
\newcolumntype{C}{c!{\color{white}\vline}}
\RequirePackage{numprint}
\RequirePackage{enumitem}

%>>>>>>>>>>>>>>>>> DEPRECATED : START
\newcommand{\alternaterowcolors}[1][UGLiBlue]{\rowcolors[]{1}{#1!10}{#1!0}}
\newcommand{\tabulardefault}{
  \arrayrulecolor{black}
  \rowcolors{1}{white}{white}
}
\newcommand{\tabularstyled}[1][UGLiBlue]{
  \arrayrulecolor{white}
  \rowcolors[]{1}{#1!10}{#1!0}
}
\newcommand{\ths}{\boxfont\bfseries\color{white}\boldmath}
%>>>>>>>>>>>>>>>>> DEPRECATED : END

\newcommand{\UGLiTabBackground}{white}

% new tab style

\newcommand{\tabstyle}[1][UGLiOrange]{
    \renewcommand{\UGLiTabBackground}{#1}
    \arrayrulecolor{white}
    \rowcolors[]{1}{#1!10}{#1!0}
}
\newcommand{\tabstyled}{
    \arrayrulecolor{white}
    \rowcolors[]{1}{\UGLiTabBackground!10}{\UGLiTabBackground!0}
}

% colored cell
\newcommand{\ccell}{\cellcolor{\UGLiTabBackground}\boxfont\bfseries\color{white}\boldmath}


% default tab style
\newcommand{\tabdefault}{
    \arrayrulecolor{black}
    \rowcolors{1}{white}{white}
}

% matrice environment to circumvent crippled pmatrix
\newsavebox{\bmatrixbox}
\newenvironment{matrice}
{\begin{lrbox}{\bmatrixbox}
    \mathsurround=0pt
    $\displaystyle
      \begin{pmatrix}}
        {\end{pmatrix}$%
  \end{lrbox}%
  \usebox{\bmatrixbox}%
  \kern-\wd\bmatrixbox
  \makebox[0pt][l]{$\left(\vphantom{\usebox{\bmatrixbox}}\right.$}%
  \kern\wd\bmatrixbox
}


\newcommand{\np}{\numprint}
\setlength{\parindent}{0pt}
\renewcommand{\baselinestretch}{1.2}


% define a new list environment with lettered labels
\newlist{enumalph}{enumerate}{1}
\setlist[enumalph]{label=\textbf{\alph*.},leftmargin=1.3em}


% beautify enumerate
\setlist[enumerate]{label=\textbf{\arabic*.},leftmargin=*}


% beautify itemize
\setlist[itemize]{label=--,leftmargin=*}


% enumerate-like \question command with no indentation at all
\newcounter{questionnumber}
\newcommand{\question}{\addtocounter{questionnumber}{1}\textbf{\thequestionnumber.~}}
\newcommand{\resetquestion}{\setcounter{questionnumber}{0}}

% QCM
\newlist{qcm}{enumerate}{1}
\setlist[qcm]{label=\raisebox{-.2em}{\Large$\square$}\hspace*{1em}\textbf{\alph*.},leftmargin=*}



% Boxes: Packages
\RequirePackage[minted,most]{tcolorbox}
\setminted{autogobble=true,breaklines=true,tabsize=4}

% Boxes: modubox (base box class)
\newenvironment{modubox}[2]{
  \renewcommand{\UGLiTabBackground}{#2}
  \begin{tcolorbox}[title={\color{#2}\boxfont #1},
      colback=white, breakable=true,
      boxrule=0pt,
      colframe=white,
      colbacktitle=white,
      attach boxed title to top left={xshift=-3.4mm,yshift=.2mm},
      frame hidden,
      sharp corners,
      enhanced,
      borderline west={5pt}{1pt}{#2!50},
      colback=white]
    }
    {\end{tcolorbox}}


% Boxes: various code environments inheriting from modubox
\newenvironment*{encadrecolore}[2]{\begin{modubox}{#1}{#2}}{
  \end{modubox}}
\newenvironment*{pyc}{\begin{modubox}{Python}{UGLiPurple}}{
  \end{modubox}}
\newenvironment*{pys}{\begin{modubox}{Python}{UGLiPurple}}{
  \end{modubox}}
\newenvironment*{html}{\begin{modubox}{HTML}{UGLiGreen}}{
  \end{modubox}}
\newenvironment*{css}{\begin{modubox}{CSS}{UGLiOrange}}{
  \end{modubox}}
\newenvironment*{js}{\begin{modubox}{Javascript}{UGLiBlue}}{
  \end{modubox}}
\newenvironment*{cpp}{\begin{modubox}{C++}{UGLiOrange}}{
  \end{modubox}}
\newenvironment*{clang}{\begin{modubox}{C}{UGLiOrange}}{
  \end{modubox}}


% Boxes: various text environments inheriting from modubox
\newenvironment*{definition}[1][]{\begin{modubox}{Définition#1}{UGLiGreen}}{\end{modubox}}
\newenvironment*{notation}[1][]{\begin{modubox}{Notation#1}{UGLiBlue}}{\end{modubox}}
\newenvironment*{exemple}[1][]{\begin{modubox}{Exemple#1}{UGLiBlue}}{\end{modubox}}
\newenvironment*{propriete}[1][]{\begin{modubox}{Propriété#1}{UGLiRed}}{\end{modubox}}
\newenvironment*{methode}[1][]{\begin{modubox}{Méthode#1}{UGLiPurple}}{\end{modubox}}
\newenvironment*{remarque}[1][]{\begin{modubox}{Remarque#1}{UGLiBlue}}{\end{modubox}}
\newenvironment*{aretenir}[1][]{\begin{modubox}{À retenir#1}{UGLiGreen}}{\end{modubox}}
\newenvironment*{demonstration}[1][]{\begin{modubox}{Preuve#1}{gray}}{\end{modubox}}

% Boxes: exo
\newcounter{exonumber}
\setcounter{exonumber}{0}
\newenvironment*{exercice}[1][]
{\stepcounter{exonumber}\begin{modubox}{Exercice \theexonumber #1}{UGLiOrange}}
    {\end{modubox}}


% Backwards compatibility with old versions
\newcommand{\pythoninline}[1]{\mintinline{python}{#1}}
%\newcommand{\og}{«}
%\newcommand{\fg}{»}

% General
\newcommand\seconde{2$^{\textrm{nde}}$}                                             % 2nde
\newcommand\premiere{1$^{\textrm{ère}}$}                                           	% 1
\newcommand\premiereSTMG{1$^{\textrm{ère}}$ STMG}                                   % 1STMG
\newcommand\terminale{T$^{\textrm{ale}}$}                                           % Term


% General math
\newcommand\vv[1]{\overrightarrow{#1}}
\newcommand\barmin[1]{\overline{#1\vphantom{b}}\,}
\newcommand\barmaj[1]{\overline{#1\vphantom{X}}}
\newcommand\card{\textrm{Card}}
\newenvironment{pmatrice}                                                     % Environnement pmatrice pour des écritures serrées
{\renewcommand\arraystretch{0.7}\begin{pmatrix}}
    {\end{pmatrix}\renewcommand\arraystretch{1}}
\newcommand\repaff{\left(\ O \ ; \ I\ ; \ \ J\ \right)}								        % Point et coordonnées dans le plan
\newcommand\rep{\left(O \ ; \ \vv{\imath}, \ \vv{\jmath}\right)}					    % Repère du plan
\newcommand\repe{\left(O \ ; \ \vv{\imath}, \ \vv{\jmath}, \ \vv{k} \right)}	% Repère de l'espace
\newcommand\pc[3]{#1\left( #2 \ ; \ #3 \right)}										            % Point et coordonnées dans le plan
\newcommand\pcf[1]{\pc{#1}{x_{#1}}{y_{#1}}}											              % Point du plan et ses coordonnées dépendant du nom.
\newcommand\pce[4]{\textrm{#1}\left( #2 \ ; \ #3 \ ; \ #4 \right)}					  % Idem dans l'espace
\newcommand\pcfe[1]{\pc{#1}{x_{#1}}{y_{#1}}{z_{#1}}}								          % Idem
\newcommand\vc[3]{\vv{#1}\begin{pmatrice} #2 \\ #3 \end{pmatrice}}					  % Vecteur du plan et coordonnées
\newcommand\vce[4]{\vv{#1}\begin{pmatrice} #2 \\ #3 \\ #4 \end{pmatrice}}			% Vecteur de l'espace et coordonnées
\newcommand\cc[2]{\begin{pmatrice} #1 \\ #2 \end{pmatrice}}							      % Coordonnées colonne
\newcommand\cce[3]{\begin{pmatrice} #1 \\ #2 \\ #3 \end{pmatrice}}					  % Idem espace
\newcommand\norme[1]{\| \vv{#1} \|}													                  % Norme
\newcommand\ps[2]{\ensuremath{\vv{#1}\cdot\vv{#2}}}									          % Produit scalaire de deux vecteurs du plan
\newcommand\anglo[2]{\left( \vv{#1}  , \ \vv{#2} \right)}                     % Angle orienté
\newcommand\N{\ensuremath{\mathbf{N}}} 												                % Naturels
\newcommand\Z{\ensuremath{\mathbf{Z}}} 												                % Relatifs
\newcommand\D{\ensuremath{\mathbf{D}}} 												                % Décimaux
\newcommand\Q{\ensuremath{\mathbf{Q}}}  											                % Rationnels
\newcommand\R{\ensuremath{\mathbf{R}}} 												                % Réels
\newcommand\C{\ensuremath{\mathbf{C}}}
\newcommand\oio[2]{\left]#1\ ;\ #2\right[}											              % Intervalle borné ouvert
\newcommand\oif[2]{\left]#1\ ;\ #2\right]}											              % Intervalle borné semi-ouvert semi-fermé
\newcommand\fio[2]{\left[#1\ ;\ #2\right[}											              % Intervalle borné semi-fermé semi ouvert
\newcommand\fif[2]{\left[#1\ ;\ #2\right]}											              % Intervalle borné fermé
\newcommand\iif[1]{\left]-\infty\ ;\ #1\right]}										            % Coupure inférieure fermée
\newcommand\iio[1]{\left]-\infty\ ;\ #1\right[}										            % Coupure inférieure ouverte
\newcommand\fii[1]{\left[#1\ ;\ +\infty\right[}										            % Coupure supérieure fermée
\newcommand\oii[1]{\left]#1\ ;\ +\infty\right[}										            % Coupure supérieure ouverte
\newcommand{\e}{\textrm{e}}															                      % exponentielle
\newcommand\courbe[1]{\ensuremath{\mathcal{C}_{#1}}}								          % C_f
\newcommand\bis{$^{\textrm{\footnotesize bis}}$}									            % Bis
\newcommand\eme{$^{\textrm{e}}$\ }                                            % ème
\newcommand{\er}{$^{\textrm{er}}$\ }                                          % er
\newcommand{\ere}{$^{\textrm{re}}$\ }                                         % ère



%\floatpictureright{fraction}{imagefile}{text}
\newlength{\colOne}
\newlength{\colTwo}
\newlength{\gutter}
\setlength{\gutter}{2em}

\newcommand{\floatpictureright}[3]{
  \setlength{\colTwo}{\dimexpr#1\textwidth}
  \setlength{\colOne}{\dimexpr\textwidth-\colTwo-\gutter\relax}
  \noindent\begin{minipage}{\colOne}
    #3
  \end{minipage}
  \hspace{\dimexpr\gutter-.5em\relax}
  \begin{minipage}{\colTwo}
    \includegraphics[width=\colTwo]{#2}
  \end{minipage}
}
%\floatpictureleft{fraction}{imagefile}{text}
\newcommand{\floatpictureleft}[3]{
  \setlength{\colOne}{\dimexpr#1\textwidth}
  \setlength{\colTwo}{\dimexpr\textwidth-\colOne-\gutter\relax}
  \noindent\begin{minipage}{\colOne}
    \includegraphics[width=\colOne]{#2}
  \end{minipage}
  \hspace{\dimexpr\gutter-.5em\relax}
  \begin{minipage}{\colTwo}
    #3
  \end{minipage}
}
%\floatpicturerightcaption{fraction}{imagefile}{caption}{text}
\newcommand{\floatpicturerightcaption}[4]{
  \setlength{\colTwo}{\dimexpr#1\textwidth}
  \setlength{\colOne}{\dimexpr\textwidth-\colTwo-\gutter\relax}
  \noindent\begin{minipage}{\colOne}
    #4
  \end{minipage}
  \hspace{\dimexpr\gutter-.5em\relax}
  \begin{minipage}{\colTwo}
    \centering
    \includegraphics[width=\colTwo]{#2}\\
    \scriptsize #3
  \end{minipage}
}
%\floatpictureleftcaption{fraction}{imagefile}{caption}{text}
\newcommand{\floatpictureleftcaption}[4]{
  \setlength{\colOne}{\dimexpr#1\textwidth}
  \setlength{\colTwo}{\dimexpr\textwidth-\colOne-\gutter\relax}
  \noindent\begin{minipage}{\colOne}
    \centering
    \includegraphics[width=\colOne]{#2}\\
    \scriptsize #3
  \end{minipage}
  \hspace{\dimexpr\gutter-.5em\relax}
  \begin{minipage}{\colTwo}
    #4
  \end{minipage}
}





\newcommand{\bareme}[1]{{\scriptsize\hfill\color{gray}\ldots~/ #1}}

\usepackage{float}
\usepackage{caption}
\captionsetup{font=scriptsize}

\newcommand{\introduction}[1] {
    \begin{flushright}\small
        \color{UGLiBlue}\textit{« #1 »}
    \end{flushright}
}